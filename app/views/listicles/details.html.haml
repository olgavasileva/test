.panel
  .panel-heading
    %h2.panel-title
      .row
        .col-sm-6
          Listicle Details
        .col-sm-6.text-right-not-xs
          = link_to 'Analytics', listicle_analytics_path(current_user, @listicle), class: %w(btn btn-sm btn-success btn-labeled)
          = link_to new_listicle_path(current_user), class: %w(btn btn-sm btn-primary btn-labeled) do
            %span.btn-label.fa.fa-plus
            Create Listicle
  .panel-body
    %table.table
      %thead
        %tr
          %th
            LISTICLE ID
          %th
            NAME
      %tbody
        %tr
          %td= @listicle.id
          %td= limit_text text_from_html(@listicle.get_intro)
.panel
  .panel-heading
    %h2.panel-title
      Distribution
  .panel-body
    %table.table
      %thead
        %tr
          %th
            URL
      %tbody
        - @listicle.deployments.each do |distribution|
          %tr
            %td= link_to distribution, distribution
.panel
  .panel-heading
    %h2.panel-title
      Listicle Item Details
  .panel-body
    %table.table
      %thead
        %tr
          %th Item ID
          %th Item Title
          %th Views
          %th Upvotes
          %th Downvotes
          %th Total Votes
          %th Net Votes
          %th
      %tbody
        - @listicle.questions.sort_by{|q| -q.score}.each_with_index do |question, idx|
          %tr
            %td= question.id
            %td{id: "question-#{question.id}-title"}= question.body.present? ? question.title : "Item #{idx + 1}"
            %td= @listicle.view_count
            %td= question.up_votes_count
            %td= question.down_votes_count
            %td= question.total_votes
            %td= question.net_votes
            %td
              = link_to 'Add script', edit_listicle_question_path(current_user, @listicle, question),
              class: 'btn btn-success add-script-button'

#dialog


