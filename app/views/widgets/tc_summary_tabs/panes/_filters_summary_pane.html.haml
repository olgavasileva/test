:sass
  $primary:#357ebd
  .filters-list

    .filter-name
      color:  $primary
      padding-right: 20px
      position: relative
      display: inline-block
      height: 2em
      margin-top: 1em
      overflow: hidden
      cursor: pointer
      .data-filter
        position: absolute
        display: block
        width: 16px
        height: 16px
        bottom: 100%
        margin-top: -2px
        width: 0
      .data-filter-visual
        position: absolute
        right: 2px
        top: 2px
        &:before
          color: inherit
          content: " "
          text-align: center
          display: inline-block
          width: 1.2em
          height: 1.2em
          line-height: 1.2em

          font-width: bold
          vertical-align: middle
          background-color: white
          border-style: solid
          border-width: 1px
          border-color: currentColor
      .data-filter:checked~.data-filter-visual
        &:before
          content: "âˆš"
      &.collapse-trigger
        height: auto
        min-height: 2em
        &>.data-filter-visual
          &:before
            content: "+"
            border-style: none
            font-size: 1.2em
        .filter-name
          display: none
        &>.data-filter:checked
          &~.data-filter-visual
            &:before
              content: "-"
              font-size: 1.4em
          &~.filter-name
            display: inline-block


.filters-list.col-xs-10.col-xs-push-1.col-sm-8.col-sm-push-2.col-md-6.col-md-push-3.col-lg-4.col-lg-push-4
  %label.filter-name.col-xs-12
    All
    %input.data-filter{:type=>'checkbox', :data=>{:exclude=>'true', :filter=>''}}
    .data-filter-visual
  %label.filter-name.col-xs-12
    Followers
    %input.data-filter{:type=>'checkbox', :data=>{:filter=>'follower'}}
    .data-filter-visual
  %label.filter-name.col-xs-12
    Following
    %input.data-filter{:type=>'checkbox', :data=>{:filter=>'following'}}
    .data-filter-visual
  %label.collapse-trigger.filter-name.col-xs-12{:data=>{:toggle=>'collapse',:target=>'.group-list-item'}}
    Groups
    %input.data-filter{:type=>'checkbox'}
    .data-filter-visual
    %label.filter-name.col-xs-12
      proof of group
      %input.data-filter{:type=>'checkbox', :data=>{:filter=>'group',:value=>"proof"}}
      .data-filter-visual
    -current_user.groups.all.each do |g|
      %label.filter-name.col-xs-12
        =g.name
        %input.data-filter{:type=>'checkbox', :data=>{:filter=>'group',:value=>"#{g.name}"}}
        .data-filter-visual

  :javascript
    if(!window.tcHAndlers){
      window.tcHAndlers={};
    }
    $(function(){
        if(!window.tcHAndlers.filterSelectionTrigger){
            window.tcHAndlers.filterSelectionTrigger=$('.filters-list').on('change','.data-filter[data-filter]',function(event){

              var filtersList=$(event.originalEvent.currentTarget),
              is_exclusive=!!$(this).data('exclude'),
              filter_value=$(this).data('value'),
              filter=$(this).data('filter'),
              filterSet=JSON.parse(filtersList.data('filters-set')||'{}');



              if(!filter){
                filterSet={}
              }
              else if(!this.checked){
                delete filterSet[filter]
              }
              else{
                if(filter_value || filter_value=== 0 || filter_value===''){
                  filterSet[filter]=filter_value
                }
                else{
                  filterSet[filter]=true
                }
              }

              filtersList.data('filters-set',JSON.stringify(filterSet));

              if(!this.checked){
                return;
              }

              if(is_exclusive){
                filtersList.find('.data-filter[data-filter]').attr('checked',false);
              }
              else{
                $(event.originalEvent.currentTarget).find('[data-exclude="true"]').attr('checked',false);
              }

              this.checked=true;
            })
        }

    })